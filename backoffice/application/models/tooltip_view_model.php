<?phpclass tooltip_view_model extends inf_model {    public function __construct() {        $this->load->model('tooltip_class_model');        $this->load->model('tree_view_model');        $this->load->model('validation_model');    }    public function getUserDetails($id, $table_name = '') {        $user_detail = array();        $arr[0] = $id;        $user_id = $this->tooltip_class_model->getUsers($arr, $table_name);        $qr = $this->tooltip_class_model->createQuery($user_id, $table_name);        if ($table_name == "") {            $user_detail = $this->tooltip_class_model->getUserDetails($qr);        } else {            $user_detail = $this->tooltip_class_model->getBoardUserDetails($qr);        }        return $user_detail;    }    public function getUserDetail($id, $ft_individual = '') {        $user_detail = array();        $this->tooltip_class_model->no_of_level = 4;        $arr[0] = $id;        $user_id1 = $this->tooltip_class_model->getSponsor($arr, $ft_individual);        $qr = $this->tooltip_class_model->createQuery($user_id1, $ft_individual);        if ($ft_individual == "") {            $user_detail = $this->tooltip_class_model->getUserDetails($qr);        } else {            $user_detail = $this->tooltip_class_model->getBoardUserDetails($qr);        }        return $user_detail;    }    public function getSponserToolTip($user_detail) {        $string = "</head>";        $string .="<body>";        $base_url = base_url() . "public_html/";        for ($i = 1; $i <= count($user_detail); $i++) {            $active_status = $this->validation_model->isUserActive($user_detail["detail$i"]["id"]);            if ($active_status) {                $string .= '<div id= "user' . $user_detail["detail$i"]["id"] . '"' . '>';                $string .= '<img width="100px" height="100px" src="' . $base_url . 'images/profile_picture/' . $user_detail["detail$i"]["user_photo"] . '" alt="' . $user_detail["detail$i"]["user_photo"] . '" align="absmiddle" />';                $string .= "<br /><b>" . lang('name') . ":</b>" . $user_detail["detail$i"]["name"];                $string.="<br/><b>" . lang('joining') . ":</b>" . $user_detail["detail$i"]["date"];                $string .= "</div>";            }        }        return $string;    }    public function getToolTip($user_detail) {        $string = "";        $base_url = base_url() . "public_html/";        $count = count($user_detail);        $rank_status = $this->validation_model->getUserRankStatus();        for ($i = 1; $i <= $count; $i++) {            $active_status = $this->validation_model->isUserActive($user_detail["detail$i"]["id"]);            if ($active_status) {                $name = $user_detail["detail$i"]["name"] . ' ' . $user_detail["detail$i"]["last_name"];                $name = substr($name, 0, 12);                $string .= '<div id= "user' . $user_detail["detail$i"]["id"] . '"' . '>';                $string .= '<img width="100px" height="100px" src="' . $base_url . 'images/profile_picture/' . $user_detail["detail$i"]["user_photo"] . '" alt="' . $user_detail["detail$i"]["user_photo"] . '" align="absmiddle" />';                if ($this->session->userdata['inf_logged_in']['mlm_plan'] == "Binary") {                    $string .= "<br/><b>" . lang('left') . ":</b>" . $user_detail["detail$i"]["left"];                    $string .= "<br/><b>" . lang('right') . ":</b>" . $user_detail["detail$i"]["right"];                    $string .= "<br/><b>" . lang('left_carry') . ":</b>" . $user_detail["detail$i"]["left_carry"];                    $string .= "<br/><b>" . lang('right_carry') . ":</b>" . $user_detail["detail$i"]["right_carry"];                }                $string .= "<br /><b>" . lang('name') . ":</b>" . $name;                $string.="<br/><b>" . lang('joining') . ":</b>" . $user_detail["detail$i"]["date"];                if ($rank_status == 'yes') {                    $string.="<br/><b>" . lang('rank') . ":</b>" . $user_detail["detail$i"]["rank"];                }                $string .= "</div>";            }        }        return $string;    }    public function getBoardToolTip($user_detail, $board_no) {        $base_url = base_url() . "public_html/";        $count = count($user_detail);        for ($i = 1; $i <= $count; $i++) {            $this->load->model("validation_model");            $user_name = $this->validation_model->idToUsernameBoard($user_detail["detail$i"]["id"], $board_no);            $string .= '<div id= "user' . $user_detail["detail$i"]["id"] . '"' . '>';            $string .= '<img width="80px" height="80px" src="' . $base_url . 'images/profile_picture/' . $user_detail["detail$i"]["user_photo"] . '" alt="' . $user_detail["detail$i"]["user_photo"] . '" align="absmiddle" />';            $string .= "<br /><b>" . lang('name') . ":</b>" . $user_detail["detail$i"]["name"];            $string .= "</div>";        }        return $string;    }    public function getUserDetailBoard($id, $board_id) {        $id_dencrypt = $id;        $this->tooltip_class_model->no_of_level = 5;        $arr[0] = $id_dencrypt;        $user_id1 = $this->tooltip_class_model->getUsersBoard($arr, $board_id);        $qr = $this->tooltip_class_model->createQueryBoard($user_id1, $board_id);        $user_detail = $this->tooltip_class_model->getUserDetailsBoard($qr, $board_id);        return $user_detail;    }    public function getToolTipBoard($user_detail, $board_id) {        $base_url = base_url() . "public_html/";        for ($i = 1; $i <= count($user_detail); $i++) {            $active_ft_id = $this->getUserRefIdByAutoID($user_detail["detail$i"]["id"], $board_id);            $string .= '<div id= "user' . $user_detail["detail$i"]["id"] . '"' . '>';            $string .= '<img width="100px" height="100px" src="' . $base_url . 'images/profile_picture/' . $user_detail["detail$i"]["user_photo"] . '" alt="' . $user_detail["detail$i"]["user_photo"] . '" align="absmiddle" />';            $string .= "<br/><b>" . lang('username') . ":</b> " . $user_detail["detail$i"]["user_name"];            $string .= "<br /><b>" . lang('name') . ":</b>" . $user_detail["detail$i"]["name"];            $string .= " <br /><b>" . lang('joining') . ":</b>" . $user_detail["detail$i"]["date"];            $string .= "</div>";        }        return $string;    }    public function getUserRefIdByAutoID($id, $board_no) {        $user_ref_id = 0;        $res = $this->db->select("user_ref_id")->where("id", $id)->get("auto_board_$board_no");        foreach ($res->result() as $row) {            $user_ref_id = $row->user_ref_id;        }        return $user_ref_id;    }}